jQuery(document).ready(function (e) { function r(r) { var t = r.find(".js-validate"), o = (r.find("button[type=submit]"), !0), a = {}; return a.showError = function (e) { e.parents(".g-fieldset").addClass("error") }, a.hideError = function (e) { e.parents(".g-fieldset").removeClass("error") }, a.checkRequired = function (e, r) { r.length > 0 ? a.hideError(e) : (a.showError(e), o = !1) }, a.checkEmail = function (e, r) { var t = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/; t.test(r) ? a.hideError(e) : (a.showError(e), o = !1) }, a.checkPhone = function (e, r) { var t = /^[\d\+]+[\d\(\)\ -]{4,20}\d$/; t.test(r) && r.length <= 20 ? a.hideError(e) : (a.showError(e), o = !1) }, a.init = function () { t.each(function () { var r = e(this), t = r.val(); r.hasClass("js-validate--required") && a.checkRequired(r, t), r.hasClass("js-validate--email") && a.checkEmail(r, t), r.hasClass("js-validate--phone") && a.checkPhone(r, t) }) }, a.init(), o } var t = e("#oform"); t.on("click", ".g-alert__close", function () { e(this).parents(".g-alert").hide() }), t.on("submit", function (o) { o.preventDefault(); var a = r(t); if (a) { var n = e("#of_name").val(), i = e("#of_mail").val(), s = e("#of_service").val(), c = e("#of_phone").val(), l = e("#of_msg").val(); e.ajax({ type: "POST", url: "/wp-content/themes/malteser/handlers/order-form-handler.php", dataType: "json", data: { of_name: n, of_mail: i, of_service: s, of_phone: c, of_msg: l, captcha: grecaptcha.getResponse() }, cache: !1, beforeSend: function (e) { t.find("button[type=submit]").prop("disabled", !0) }, success: function (e) { e.error ? alert(e.error) : (t.find(".g-input, .g-textarea").val(""), t.find(".g-select option:first-child").attr("selected", !0), grecaptcha.reset(), t.find(".g-alert--ok").show()) }, error: function (e, r, o) { console.log(e.status), console.log(o), t.find(".g-alert--wrong").show() }, complete: function (e) { t.find("button[type=submit]").prop("disabled", !1) } }) } }) });