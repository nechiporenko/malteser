jQuery(document).ready(function(e){function r(r){var o=r.find(".js-validate"),t=(r.find("button[type=submit]"),!0),a={};return a.showError=function(e){e.parents(".g-fieldset").addClass("error")},a.hideError=function(e){e.parents(".g-fieldset").removeClass("error")},a.checkRequired=function(e,r){r.length>0?a.hideError(e):(a.showError(e),t=!1)},a.checkEmail=function(e,r){var o=/^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/;o.test(r)?a.hideError(e):(a.showError(e),t=!1)},a.checkPhone=function(e,r){var o=/^[\d\+]+[\d\(\)\ -]{4,20}\d$/;o.test(r)&&r.length<=20?a.hideError(e):(a.showError(e),t=!1)},a.init=function(){o.each(function(){var r=e(this),o=r.val();r.hasClass("js-validate--required")&&a.checkRequired(r,o),r.hasClass("js-validate--email")&&a.checkEmail(r,o),r.hasClass("js-validate--phone")&&a.checkPhone(r,o)})},a.init(),t}function o(r,o,a,n,i){t&&t.abort(),t=e.ajax({url:"https://script.google.com/macros/s/AKfycbw2i9YRLKVGqeNDiuRze0Da4_eYE4fqYu8CM83Y4LTVbvKiwpq4/exec",type:"POST",data:{name:r,mail:o,service:a,phone:n,msg:i}}),t.done(function(e,r,o){}),t.fail(function(e,r,o){})}var t,a=e("#oform");a.on("click",".g-alert__close",function(){e(this).parents(".g-alert").hide()}),a.on("submit",function(t){t.preventDefault();var n=r(a);if(n){var i=e("#of_name").val(),s=e("#of_mail").val(),c=e("#of_service").val(),l=e("#of_phone").val(),f=e("#of_msg").val();e.ajax({type:"POST",url:"/wp-content/themes/malteser/handlers/order-form-handler.php",dataType:"json",data:{of_name:i,of_mail:s,of_service:c,of_phone:l,of_msg:f,captcha:grecaptcha.getResponse()},cache:!1,beforeSend:function(e){a.find("button[type=submit]").prop("disabled",!0)},success:function(e){e.error?alert(e.error):(a.find(".g-input, .g-textarea").val(""),a.find(".g-select").prop("selectedIndex",0),grecaptcha.reset(),a.find(".g-alert--ok").show(),o(i,s,c,l,f))},error:function(e,r,o){console.log(e.status),console.log(o),a.find(".g-alert--wrong").show()},complete:function(e){a.find("button[type=submit]").prop("disabled",!1)}})}})});